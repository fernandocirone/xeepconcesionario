@using Microsoft.AspNetCore.Identity
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

@{
    var displayName = User?.Identity?.Name ?? "Usuario";
    var initial = string.IsNullOrWhiteSpace(displayName) ? "U" : displayName.Trim()[0].ToString().ToUpper();
}

@if (SignInManager.IsSignedIn(User))
{
    <div class="sidebar__user" title="@displayName">
        <span class="sidebar__avatar">@initial</span>
        <div class="sidebar__user-info">
            <div class="sidebar__user-name">@displayName</div>

            <div class="d-grid gap-2 mt-2">
                <a class="btn btn-outline-light btn-sm" asp-area="Identity" asp-page="/Account/Manage/Index">
                    Mi cuenta
                </a>
                <form method="post"
                      asp-area="Identity"
                      asp-page="/Account/Logout"
                      asp-route-returnUrl="@Url.Action("Index","Home", new { area = "" })">
                    <button type="submit" class="btn btn-outline-light btn-sm">Salir</button>
                </form>
            </div>
        </div>
    </div>
}
else
{
    <div class="d-grid gap-2">
        <a class="btn btn-outline-light btn-sm" asp-area="Identity" asp-page="/Account/Login">Ingresar</a>
        <a class="btn btn-outline-light btn-sm" asp-area="Identity" asp-page="/Account/Register">Registrarse</a>
    </div>
}
